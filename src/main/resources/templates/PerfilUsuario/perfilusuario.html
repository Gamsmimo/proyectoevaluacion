<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Perfil de Usuario</title>
	<link rel="stylesheet" th:href="@{/assets/css/perfilusuario-css.css}">
</head>

<body>
	<div class="container">
		<div class="header">
			<h1>Mi Perfil</h1>
			<p>Administra tu información personal y configuración de cuenta</p>
		</div>

		<div class="profile-layout">
			<aside class="sidebar">
				<div class="profile-photo-section">
					<div class="photo-wrapper">
						<div class="photo-ring"></div>
						<img th:src="${session.fotoPerfil != null} ? ${session.fotoPerfil} : 'https://ui-avatars.com/api/?name=' + ${#strings.replace(usuario.nombre, ' ', '+')} + '&size=160&background=6366f1&color=fff&bold=true'"
							alt="Foto de perfil" class="profile-photo" id="profilePhoto">
						<input type="file" id="fileInput" accept="image/*" style="display: none;">
					</div>
					<h2 class="user-name" id="displayName" th:text="${usuario.nombre}">Juan Pérez</h2>
					<p class="user-role" id="displayRole">Usuario</p>
				</div>
			</aside>

			<main class="main-content">
				<div class="tabs">
					<button class="tab active">Información Personal</button>
					<button class="tab">Seguridad</button>
				</div>

				<div class="alert" id="alert">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
						stroke-linejoin="round">
						<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
						<polyline points="22 4 12 14.01 9 11.01" />
					</svg>
					<span id="alertText"></span>
				</div>

				<form id="profileForm">
					<input type="hidden" id="usuarioId" th:value="${usuario.id}">

					<h3 class="section-title">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2"
							stroke-linecap="round" stroke-linejoin="round">
							<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
							<circle cx="12" cy="7" r="4" />
						</svg>
						Datos Personales
					</h3>

					<div class="form-grid">
						<div class="form-group">
							<label class="form-label" for="firstName">Nombre</label>
							<input type="text" class="form-input" id="firstName" th:value="${usuario.nombre}" disabled>
						</div>

						<div class="form-group full-width">
							<label class="form-label" for="email">Correo Electrónico</label>
							<input type="email" class="form-input" id="email" th:value="${usuario.email}" disabled>
						</div>

						<div class="form-group">
							<label class="form-label" for="phone">Teléfono</label>
							<input type="tel" class="form-input" id="phone"
								th:value="${usuario.telefono != null ? usuario.telefono : ''}" disabled>
						</div>
					</div>

					<div class="button-group">
						<button type="button" class="btn btn-primary" id="editBtn">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
								stroke-linecap="round" stroke-linejoin="round">
								<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
								<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
							</svg>
							<span>Editar Información</span>
						</button>

						<button type="button" class="btn btn-primary" id="saveBtn" style="display: none;">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
								stroke-linecap="round" stroke-linejoin="round">
								<polyline points="20 6 9 17 4 12" />
							</svg>
							<span>Guardar Cambios</span>
						</button>

						<button type="button" class="btn btn-secondary" id="cancelBtn" style="display: none;">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
								stroke-linecap="round" stroke-linejoin="round">
								<line x1="18" y1="6" x2="6" y2="18" />
								<line x1="6" y1="6" x2="18" y2="18" />
							</svg>
							<span>Cancelar</span>
						</button>

						<!-- Botón de eliminar cuenta -->
						<button type="button" class="btn btn-danger-outline" id="deleteAccountBtn">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
								stroke-linecap="round" stroke-linejoin="round">
								<path d="M3 6h18"></path>
								<path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
								<path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
								<line x1="10" y1="11" x2="10" y2="17"></line>
								<line x1="14" y1="11" x2="14" y2="17"></line>
							</svg>
							<span>Eliminar Cuenta</span>
						</button>

						<button type="button" class="btn btn-danger" id="logoutBtn" style="margin-left: auto;">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
								stroke-linecap="round" stroke-linejoin="round">
								<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
								<polyline points="16 17 21 12 16 7" />
								<line x1="21" y1="12" x2="9" y2="12" />
							</svg>
							<span>Cerrar Sesión</span>
						</button>
					</div>
				</form>
			</main>
		</div>
	</div>

	<script th:src="@{/assets/js/perfilusuario-js.js}"></script>
</body>

</html>