<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard Profesional - TechFix</title>
	<link rel="stylesheet" th:href="@{/assets/css/profesional.css}">
</head>

<body>
	<div class="dashboard-container">
		<!-- Header -->
		<header class="dashboard-header">
			<div class="header-content">
				<h1>TechFix <span class="professional-badge">Profesional</span></h1>
				<div class="user-info">
					<span th:text="${usuario.nombre}">Nombre Usuario</span>
					<div class="user-actions">
						<!-- Bot√≥n para abrir modal de eliminar cuenta -->
						<button type="button" class="btn-delete-account" onclick="abrirModalEliminar()">
							üóëÔ∏è Eliminar Cuenta
						</button>
						<a th:href="@{/usuarios/logout}" class="btn-logout">Cerrar Sesi√≥n</a>
					</div>
				</div>
			</div>
		</header>

		<!-- Main Content -->
		<main class="dashboard-main">
			<!-- Welcome Section -->
			<div class="welcome-section">
				<h2>Bienvenido, <span th:text="${usuario.nombre}">Profesional</span></h2>
				<p>Gestiona tus servicios y citas desde tu panel profesional</p>
			</div>

			<!-- Professional Info -->
			<div class="info-section">
				<!-- Mi Informaci√≥n Profesional -->
				<div class="info-card">
					<div
						style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
						<h3>Mi Informaci√≥n Profesional</h3>
						<a th:href="@{/profesional/editar}" class="btn-profile" style="text-decoration: none;">
							‚úèÔ∏è Editar Informaci√≥n
						</a>
					</div>
					<div class="info-content">
						<div class="info-item">
							<label>Especialidad:</label>
							<span th:text="${profesional.especialidad}">Especialidad</span>
						</div>
						<div class="info-item">
							<label>Horario Disponible:</label>
							<span th:text="${profesional.horarioDisponible}">Horario</span>
						</div>
						<div class="info-item">
							<label>Email:</label>
							<span th:text="${usuario.email}">email@ejemplo.com</span>
						</div>
						<div class="info-item">
							<label>Tel√©fono:</label>
							<span th:text="${usuario.telefono}">+57 300 123 4567</span>
						</div>
					</div>
				</div>

				<!-- Crear Nuevo Servicio -->
				<div class="info-card">
					<h3>‚ûï Crear Nuevo Servicio</h3>
					<!-- En profesional.html, actualiza el formulario -->
					<form id="formCrearServicio" class="service-form" onsubmit="crearServicio(event)">
						<div class="form-group">
							<label for="nombreServicio">Nombre del Servicio *</label>
							<input type="text" id="nombreServicio" name="nombreServicio"
								placeholder="Ej: Reparaci√≥n de computadora" required>
						</div>

						<div class="form-group">
							<label for="descripcionServicio">Descripci√≥n *</label>
							<textarea id="descripcionServicio" name="descripcionServicio" rows="3"
								placeholder="Describe los detalles del servicio..." required></textarea>
						</div>

						<div class="form-row">
							<div class="form-group">
								<label for="duracionServicio">Duraci√≥n (minutos) *</label>
								<input type="number" id="duracionServicio" name="duracionServicio" min="15" step="15"
									placeholder="60" required>
							</div>

							<div class="form-group">
								<label for="precioServicio">Precio (COP) *</label>
								<input type="number" id="precioServicio" name="precioServicio" min="0" step="1000"
									placeholder="50000" required>
							</div>
						</div>

						<button type="submit" class="btn-submit-service">
							üíæ Guardar Servicio
						</button>
					</form>
					<!-- Lista de servicios creados -->
					<div class="services-list" id="servicesList">
						<h4 style="margin-top: 2rem; margin-bottom: 1rem; color: #4a5568;">Mis Servicios</h4>
						<div class="empty-services">
							<p>No has creado servicios a√∫n</p>
						</div>
					</div>
				</div>
			</div>

			<!-- Recent Appointments -->
			<div class="appointments-section">
				<div class="section-header">
					<h3>Pr√≥ximas Citas</h3>
					<button class="btn-view-all" onclick="verTodasCitas()">Ver Todas</button>
				</div>
				<div class="appointments-list" id="appointmentsList">
					<!-- Las citas se cargar√°n con JavaScript -->
					<div class="empty-state">
						<p>No tienes citas programadas</p>
					</div>
				</div>
			</div>
		</main>
	</div>

	<!-- Modal de Confirmaci√≥n para Eliminar Cuenta -->
	<div id="modalEliminar" class="modal" style="display: none;">
		<div class="modal-content">
			<h3>‚ö†Ô∏è Confirmar Eliminaci√≥n de Cuenta</h3>
			<p>¬øEst√°s seguro de que deseas eliminar tu cuenta? Esta acci√≥n:</p>
			<ul>
				<li>Eliminar√° permanentemente tu perfil profesional</li>
				<li>Eliminar√° tu cuenta de usuario</li>
				<li>No se puede deshacer</li>
			</ul>
			<p>Para confirmar, escribe <strong>ELIMINAR</strong> en el siguiente campo:</p>
			<input type="text" id="confirmacionTexto" placeholder="Escribe ELIMINAR aqu√≠"
				style="width: 100%; padding: 0.5rem; margin: 1rem 0; border: 2px solid #e53e3e; border-radius: 4px;">
			<div class="modal-actions">
				<button type="button" onclick="cerrarModalEliminar()" class="btn-cancel">Cancelar</button>
				<button type="button" onclick="confirmarEliminacion()" class="btn-confirm" disabled id="btnConfirmar">
					Eliminar Cuenta Permanentemente
				</button>
			</div>
		</div>
	</div>

	<!-- Formulario oculto para eliminar cuenta -->
	<form id="formEliminarCuenta" th:action="@{/profesional/eliminar-cuenta}" method="post" style="display: none;">
	</form>

	<script th:src="@{/assets/js/profesional.js}"></script>
</body>

</html>